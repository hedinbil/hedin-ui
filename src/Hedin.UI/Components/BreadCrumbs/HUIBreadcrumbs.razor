@namespace Hedin.UI
@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime

@if ((Breadcrumbs?.Count() ?? 0) > 1)
{
    <span class="d-flex align-center gap-3 mb-3">
        <HUIIconButton Icon="@Icons.Material.Filled.ArrowBack" OnClick="HandleOnBackClick"></HUIIconButton>
        <MudBreadcrumbs Class="pa-0" Items="Breadcrumbs" />
    </span>
}

@code {
    /// <summary>
    /// Collection of breadcrumb items to display.
    /// Each item represents a navigation level with text and href.
    /// Must contain at least 2 items for the back button to function.
    /// </summary>
    [Parameter] public List<BreadcrumbItem> Breadcrumbs { get; set; }

    private async void HandleOnBackClick()
    {
        // Check if Breadcrumbs is not null and has at least two items
        var previousUrl = (Breadcrumbs != null && Breadcrumbs.Count >= 2) ? Breadcrumbs[^2].Href : null;

        // Navigate or fallback based on the existence of a valid URL
        if (!string.IsNullOrEmpty(previousUrl))
        {
            NavigationManager.NavigateTo(previousUrl);
        }
        else
        {
            await JSRuntime.InvokeVoidAsync("history.back");
        }
    }
}
