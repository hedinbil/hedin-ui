@namespace Hedin.UI
@inject IJSRuntime JSRuntime

<MudExpansionPanels Elevation="0" Class="hui-rounded-s">
    <MudExpansionPanel Class="@($"hui-module-dense {Class}")" Expanded="false" HideIcon="true" ExpandedChanged="Navigate">
        <TitleContent>
            <div class="d-flex justify-space-between">
                <MudText>@Header</MudText>
                    <div class="d-flex gap-1 my-n1 align-center">
                    @if (Buttons != null)
                    {
                        @Buttons
                    }
                    <MudIconButton Disabled="Disabled" Icon="@Icons.Material.Filled.OpenInNew" Size="Size.Small" OnClick="Navigate"></MudIconButton>
                </div>
            </div>
        </TitleContent>
    </MudExpansionPanel>
</MudExpansionPanels>
@code {
    /// <summary>
    /// The URL to navigate to when the module link is clicked.
    /// Opens in a new tab when clicked.
    /// </summary>
    [Parameter, EditorRequired] public string? Url { get; set; }
    
    /// <summary>
    /// Text displayed as the module link header.
    /// Describes the destination or purpose of the link.
    /// </summary>
    [Parameter, EditorRequired] public string? Header { get; set; }
    
    /// <summary>
    /// Custom buttons to display alongside the module link.
    /// Typically used for additional actions or controls.
    /// </summary>
    [Parameter] public RenderFragment? Buttons { get; set; }
    
    /// <summary>
    /// CSS class applied to the module link container.
    /// Used for custom link styling.
    /// </summary>
    [Parameter] public string? Class { get; set; }
    
    /// <summary>
    /// Disables the module link when true.
    /// Prevents navigation and shows disabled styling.
    /// </summary>
    [Parameter] public bool Disabled { get; set; } = false;
    private async Task Navigate() {
        if (!Disabled)
        {
            await JSRuntime.InvokeVoidAsync("open", Url, "_blank");
        }
    }
}
