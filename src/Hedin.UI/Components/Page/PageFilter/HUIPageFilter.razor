@namespace Hedin.UI
@inherits HUIComponentBase
@inject InternaHUIlLocalizer Localizer

<HUIModule Class="@Class" Header="Filter" IsExpanded="true">
    <Buttons>
        @Buttons
        <HUIIconButton Icon="@Icons.Material.Filled.RestartAlt" OnClick="HandleClearClick" Tooltip="@Localizer["HUIPageFilter.ResetFilters"]" />
        @if (ShowOptionsButton)
        {
            @* <HUIButton Size="Size.Small" Variant="Variant.Outlined" StartIcon="@Icons.Material.Filled.Build" OnClick="HandleOptionsClick">@Localizer["HUIPageFilter.ManageFilterButtonText"]</HUIButton> *@
            <HUIIconButton Icon="@Icons.Material.Filled.Build" OnClick="HandleOptionsClick" Tooltip="@Localizer["HUIPageFilter.ManageFilterButtonText"]"></HUIIconButton>
        }
    </Buttons>
    <ChildContent>
        <div class="hui-page-filter">
            @ChildContent
        </div>
    </ChildContent>
    <Footer>
        @if (ShowSearchButton)
        {
            <div class="d-flex justify-end mt-3">
                <HUIButton Color="Color.Primary" Variant="Variant.Filled" OnClick="HandleSearchClick">@Localizer["HUIPageFilter.SearchButtonText"]</HUIButton>
            </div>
        }
    </Footer>
</HUIModule>

@code {
    /// <summary>
    /// Place fields here, they will be formatted and sized correctly
    /// </summary>
    [Parameter] public RenderFragment? ChildContent { get; set; }
    
    /// <summary>
    /// Event callback when the search button is clicked.
    /// Typically used to apply the filter criteria.
    /// </summary>
    [Parameter] public EventCallback OnSearchClick { get; set; }
    
    /// <summary>
    /// Event callback when the clear button is clicked.
    /// Typically used to reset all filter values.
    /// </summary>
    [Parameter] public EventCallback OnClearClick { get; set; }
    
    /// <summary>
    /// Custom buttons to display in the filter header.
    /// Typically used for additional filter actions or controls.
    /// </summary>
    [Parameter] public RenderFragment? Buttons { get; set; }
    
    /// <summary>
    /// Shows the search button when true.
    /// Enables manual filter application.
    /// </summary>
    [Parameter] public bool ShowSearchButton { get; set; } = true;
    
    /// <summary>
    /// Shows the options button when true.
    /// Enables filter management and configuration.
    /// </summary>
    [Parameter] public bool ShowOptionsButton { get; set; } = true;
    
    /// <summary>
    /// Event callback when the options button is clicked.
    /// Typically used to open filter management dialog.
    /// </summary>
    [Parameter] public EventCallback OnOptionsClick { get; set; }
    
    /// <summary>
    /// CSS class applied to the filter container.
    /// Used for custom filter styling.
    /// </summary>
    [Parameter] public string? Class { get; set; }

    private void HandleOptionsClick() => OnOptionsClick.InvokeAsync();
    private void HandleSearchClick() => OnSearchClick.InvokeAsync();
    private void HandleClearClick() => OnClearClick.InvokeAsync();
}
