@page "/privacy"
@inject CookieConsentService CookieConsentService
@inject IJSRuntime JSRuntime

<PageTitle>Privacy Policy - Hedin UI</PageTitle>

<HUIPage>
    <MudContainer MaxWidth="MaxWidth.Medium" Class="py-4">
        <MudText Typo="Typo.h3" Class="mb-4">Privacy Policy</MudText>
        
        <MudText Typo="Typo.body1" Class="mb-4">
            <strong>Last updated:</strong> @DateTime.Now.ToString("MMMM dd, yyyy")
        </MudText>

        <MudCard Class="mb-4">
            <MudCardContent>
                <MudText Typo="Typo.h6" Class="mb-3">Information We Collect</MudText>
                <MudText Typo="Typo.body2" Class="mb-3">
                    We use Microsoft Clarity to analyze how visitors interact with our website. 
                    This helps us understand user behavior and improve our services.
                </MudText>
                <MudText Typo="Typo.body2">
                    The data collected includes:
                </MudText>
                <MudList T="string">
                    <MudListItem T="string" Icon="@Icons.Material.Filled.Check" Text="Pages visited and time spent on each page" />
                    <MudListItem T="string" Icon="@Icons.Material.Filled.Check" Text="Click patterns and user interactions" />
                    <MudListItem T="string" Icon="@Icons.Material.Filled.Check" Text="Device and browser information" />
                    <MudListItem T="string" Icon="@Icons.Material.Filled.Check" Text="General location data (country/region level)" />
                </MudList>
            </MudCardContent>
        </MudCard>

        <MudCard Class="mb-4">
            <MudCardContent>
                <MudText Typo="Typo.h6" Class="mb-3">How We Use Your Information</MudText>
                <MudText Typo="Typo.body2">
                    The analytics data we collect is used solely to:
                </MudText>
                <MudList T="string">
                    <MudListItem T="string" Icon="@Icons.Material.Filled.Check" Text="Improve website performance and user experience" />
                    <MudListItem T="string" Icon="@Icons.Material.Filled.Check" Text="Understand which content is most valuable to our users" />
                    <MudListItem T="string" Icon="@Icons.Material.Filled.Check" Text="Identify and fix technical issues" />
                </MudList>
            </MudCardContent>
        </MudCard>

        <MudCard Class="mb-4">
            <MudCardContent>
                <MudText Typo="Typo.h6" Class="mb-3">Your Rights</MudText>
                <MudText Typo="Typo.body2" Class="mb-3">
                    You have the right to:
                </MudText>
                <MudList T="string">
                    <MudListItem T="string" Icon="@Icons.Material.Filled.Check" Text="Accept or decline analytics cookies" />
                    <MudListItem T="string" Icon="@Icons.Material.Filled.Check" Text="Change your consent preferences at any time" />
                </MudList>
            </MudCardContent>
        </MudCard>

        <MudCard Class="mb-4">
            <MudCardContent>
                <MudText Typo="Typo.h6" Class="mb-3">Cookie Settings</MudText>
                <MudText Typo="Typo.body2" Class="mb-3">
                    You can change your cookie preferences at any time. Click the button below to 
                    show the cookie consent banner again and update your settings.
                </MudText>
                <MudButton Variant="Variant.Filled" 
                          Color="Color.Primary" 
                          OnClick="ShowCookieConsent"
                          StartIcon="@Icons.Material.Filled.Cookie">
                    Update Cookie Preferences
                </MudButton>
            </MudCardContent>
        </MudCard>

        <MudCard>
            <MudCardContent>
                <MudText Typo="Typo.h6" Class="mb-3">Contact Us</MudText>
                <MudText Typo="Typo.body2">
                    If you have any questions about this privacy policy or our data practices, 
                    please contact us through our 
                    <MudLink Href="https://github.com/hedinbil/hedin-ui" Target="_blank" Underline="Underline.Always">
                        GitHub repository
                    </MudLink>.
                </MudText>
            </MudCardContent>
        </MudCard>
    </MudContainer>
</HUIPage>

@code {
    private async Task ShowCookieConsent()
    {
        // Force show the banner by clearing consent
        await CookieConsentService.ForceShowBannerAsync();
        // Force a page reload to show the banner
        await JSRuntime.InvokeVoidAsync("location.reload");
    }
}
